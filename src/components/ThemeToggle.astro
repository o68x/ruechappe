---
import RiseIcon from "./svg/rise.svg.astro";
import SleepIcon from "./svg/sleep.svg.astro";
---

<style>
  .theme-toggle-container {
    transition: transform 0.25s cubic-bezier(0, 1.5, 0.8, 1.2);

    @media (pointer: coarse) {
      width: var(--size-8);
      transform: translateY(-0.5rem);
    }

    @media (pointer: fine) {
      &:hover,
      &:focus {
        transform: translateY(-0.25rem);
      }
    }

    @media (--md) {
      width: 4rem;
    }

    @media print {
      display: none;
    }
  }

  .theme-toggle {
    background: inherit;
    border: none;
  }

  #moon,
  #sun {
    fill: var(--nav-icon);
    stroke: none;

    @nest :hover > svg > & {
      fill: var(--nav-icon-hover);
    }
  }

  #sun {
    transition: transform 0.5s var(--ease-4);
    transform-origin: center center;
  }

  #sun-beams {
    --_opacity-dur: 0.15s;

    stroke: var(--nav-icon);
    stroke-width: 2px;
    transform-origin: center center;
    transition:
      transform 0.5s var(--ease-elastic-4),
      opacity var(--_opacity-dur) var(--ease-4);

    @nest :hover > svg > & {
      stroke: var(--nav-icon-hover);
    }
  }

  #moon > circle {
    transition: transform 0.5s var(--ease-out-3);
  }
</style>

<style global>
  [data-theme="light"] {
    & #rise {
      opacity: 0;
      transition: all 0.3s ease;
    }

    & #sleep {
      opacity: 1;
      transition: all 0.3s ease;
    }
  }

  [data-theme="dark"] {
    & #rise {
      opacity: 1;
      transition: all 0.3s ease;
    }

    & #sleep {
      opacity: 0;
      transition: all 0.3s ease;
    }
  }

</style>

<div class="theme-toggle-container">
  <button class="theme-toggle ga-event stacked" id="theme-toggle" title="Toggles light & dark" aria-live="auto" data-ga-label="theme-toggle">
    <RiseIcon />
    <SleepIcon />
  </button>
</div>